{"ast":null,"code":"import { Card, Checkbox, Button } from \"src/components/UIComponents\";\nimport axios from \"axios\";\nimport axiosClient from \"../../../../axios\";\nexport default {\n  components: {\n    Card,\n    [Checkbox.name]: Checkbox,\n    [Button.name]: Button\n  },\n  mounted() {\n    this.fetchIpAddress();\n    try {\n      const uri = window.location.href;\n      var credentials = uri.split(\"?\")[1];\n      var email = decodeURIComponent(credentials.split(\"&\")[0]);\n      var password = credentials.split(\"&\")[1];\n      console.log(\"email: \", email, \"password: \", password);\n    } catch {\n      console.log(\"Default\");\n    }\n  },\n  methods: {\n    fetchIpAddress() {\n      const ipAxios = axios.create();\n      ipAxios.get(\"https://api.ipify.org?format=json\").then(response => {\n        this.ipAddress = response.data.ip;\n        console.log(\"IP Adress:\", this.ipAddress);\n      }).catch(error => {\n        console.error(error);\n      });\n    },\n    login() {\n      axiosClient.post(\"/login\", {\n        email: this.form.email,\n        password: this.form.password,\n        remember: this.form.remember,\n        ipAddress: this.ipAddress\n      }).then(response => {\n        if (response.data.user.status == \"Active\") {\n          sessionStorage.setItem(\"UserID\", response.data.user.id);\n          sessionStorage.setItem(\"Token\", response.data.token);\n          sessionStorage.setItem(\"Position\", response.data.user.position);\n          sessionStorage.setItem(\"Company\", response.data.company[0].shortName);\n          sessionStorage.setItem(\"Email\", response.data.user.email);\n          if (response.data.user.position == \"Admin\") {\n            this.$router.push({\n              name: \"Overview\"\n            });\n          } else if (response.data.user.position == \"Agent\" || response.data.user.position == \"Approver\") {\n            this.$router.push({\n              name: \"Pull-Out Requests\"\n            });\n          } else if (response.data.user.position == \"User\") {\n            this.$router.push({\n              name: \"Pull-Out Requisition Form\"\n            });\n          }\n        } else {\n          this.errorMsg = \"Your account is temporarily unavailable. Kindly contact your Administrator.\";\n        }\n      }).catch(err => {\n        this.errorMsg = err.response.data.message;\n        console.error(err.response.data.message);\n      });\n    }\n  },\n  data() {\n    return {\n      form: {\n        email: \"\",\n        password: \"\",\n        remember: false\n      },\n      errorMsg: \"\",\n      ipAddress: \"\"\n    };\n  }\n};","map":{"version":3,"names":["Card","Checkbox","Button","axios","axiosClient","components","name","mounted","fetchIpAddress","uri","window","location","href","credentials","split","email","decodeURIComponent","password","console","log","methods","ipAxios","create","get","then","response","ipAddress","data","ip","catch","error","login","post","form","remember","user","status","sessionStorage","setItem","id","token","position","company","shortName","$router","push","errorMsg","err","message"],"sources":["src/components/Dashboard/Views/Pages/Login.vue"],"sourcesContent":["<template>\n  <div class=\"login-page\">\n    <div class=\"wrapper wrapper-full-page\">\n      <div class=\"full-page login-page section-image\">\n        <!--   you can change the color of the filter page using: data-color=\"blue | azure | green | orange | red | purple\" -->\n        <div class=\"content\">\n          <div class=\"container\">\n            <div class=\"col-lg-4 col-md-6 ml-auto mr-auto\">\n              <form @submit.prevent=\"login\">\n                <card type=\"login\" class=\"m-0 p-0 pb-2\">\n                  <div\n                    v-if=\"errorMsg\"\n                    class=\"alert alert-danger alert-dismissible fade show\"\n                  >\n                    <button\n                      type=\"button\"\n                      aria-hidden=\"true\"\n                      class=\"close\"\n                      data-dismiss=\"alert\"\n                      aria-label=\"Close\"\n                      @click=\"errorMsg = ''\"\n                    >\n                      <i class=\"nc-icon nc-simple-remove\"></i>\n                    </button>\n                    <span>{{ errorMsg }}</span>\n                  </div>\n                  <h3 slot=\"header\" class=\"header text-center\">Login</h3>\n\n                  <fg-input\n                    v-model=\"form.email\"\n                    addon-left-icon=\"nc-icon nc-single-02\"\n                    placeholder=\"E-mail\"\n                  ></fg-input>\n\n                  <fg-input\n                    v-model=\"form.password\"\n                    addon-left-icon=\"nc-icon nc-key-25\"\n                    placeholder=\"Password\"\n                    type=\"password\"\n                  ></fg-input>\n\n                  <br />\n\n                  <div class=\"d-flex justify-content-between\">\n                    <p-checkbox v-model=\"form.remember\"> Remember Me </p-checkbox>\n                    <!-- <a slot=\"footer\" class=\"forgotPass\">Forgot Your Password? </a> -->\n                    <router-link class=\"forgotPass\" to=\"/login/forgot_password\"\n                      >Forgot Your Password?\n                    </router-link>\n                  </div>\n                  <div class=\"card-footer pt-2 p-0 d-flex flex-column\">\n                    <p-button\n                      native-type=\"submit\"\n                      type=\"warning\"\n                      round\n                      block\n                      class=\"mb-10px\"\n                      >Log In\n                    </p-button>\n                    <router-link class=\"registerBTN text-center\" to=\"/register\"\n                      >Create an Account\n                    </router-link>\n                  </div>\n                </card>\n              </form>\n            </div>\n          </div>\n        </div>\n        <!-- <app-footer></app-footer> -->\n        <div\n          class=\"full-page-background\"\n          style=\"background-image: url(static/img/background/background-2.jpg)\"\n        ></div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { Card, Checkbox, Button } from \"src/components/UIComponents\";\n// import AppFooter from './Layout/AppFooter'\nimport axios from \"axios\";\nimport axiosClient from \"../../../../axios\";\n\nexport default {\n  components: {\n    Card,\n    [Checkbox.name]: Checkbox,\n    [Button.name]: Button,\n  },\n  mounted() {\n    this.fetchIpAddress();\n    try {\n      const uri = window.location.href;\n      var credentials = uri.split(\"?\")[1];\n      var email = decodeURIComponent(credentials.split(\"&\")[0]);\n      var password = credentials.split(\"&\")[1];\n      console.log(\"email: \", email, \"password: \", password);\n    } catch {\n      console.log(\"Default\");\n    }\n  },\n  methods: {\n    fetchIpAddress() {\n      const ipAxios = axios.create(); // Create a new Axios instance\n\n      ipAxios\n        .get(\"https://api.ipify.org?format=json\")\n        .then((response) => {\n          this.ipAddress = response.data.ip;\n          console.log(\"IP Adress:\", this.ipAddress);\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    },\n    login() {\n      axiosClient\n        .post(\"/login\", {\n          email: this.form.email,\n          password: this.form.password,\n          remember: this.form.remember,\n          ipAddress: this.ipAddress,\n        })\n        .then((response) => {\n          if (response.data.user.status == \"Active\") {\n            sessionStorage.setItem(\"UserID\", response.data.user.id);\n            sessionStorage.setItem(\"Token\", response.data.token);\n            sessionStorage.setItem(\"Position\", response.data.user.position);\n            sessionStorage.setItem(\"Company\", response.data.company[0].shortName);\n            sessionStorage.setItem(\"Email\", response.data.user.email);\n            if (response.data.user.position == \"Admin\") {\n              this.$router.push({ name: \"Overview\" });\n            } else if (\n              response.data.user.position == \"Agent\" ||\n              response.data.user.position == \"Approver\"\n            ) {\n              this.$router.push({ name: \"Pull-Out Requests\" });\n            } else if (response.data.user.position == \"User\") {\n              this.$router.push({ name: \"Pull-Out Requisition Form\" });\n            }\n          } else {\n            this.errorMsg =\n              \"Your account is temporarily unavailable. Kindly contact your Administrator.\";\n          }\n        })\n        .catch((err) => {\n          this.errorMsg = err.response.data.message;\n          console.error(err.response.data.message);\n        });\n    },\n  },\n  data() {\n    return {\n      form: {\n        email: \"\",\n        password: \"\",\n        remember: false,\n      },\n      errorMsg: \"\",\n      ipAddress: \"\",\n    };\n  },\n};\n</script>\n<style lang=\"scss\">\n.forgotPass {\n  font-size: 11px !important;\n  text-decoration-line: underline !important;\n  margin-right: 10px;\n  margin-top: 5px;\n  color: gray !important;\n}\n.forgotPass:hover {\n  color: black !important;\n  cursor: pointer;\n}\n.registerBTN {\n  font-size: 14px !important;\n  text-decoration-line: none !important;\n  color: gray !important;\n}\n.registerBTN:hover {\n  color: black !important;\n  text-decoration-line: underline !important;\n  cursor: pointer;\n}\n.mb-10px {\n  margin-bottom: 10px !important;\n}\n</style>\n"],"mappings":"AA8EA,SAAAA,IAAA,EAAAC,QAAA,EAAAC,MAAA;AAEA,OAAAC,KAAA;AACA,OAAAC,WAAA;AAEA;EACAC,UAAA;IACAL,IAAA;IACA,CAAAC,QAAA,CAAAK,IAAA,GAAAL,QAAA;IACA,CAAAC,MAAA,CAAAI,IAAA,GAAAJ;EACA;EACAK,QAAA;IACA,KAAAC,cAAA;IACA;MACA,MAAAC,GAAA,GAAAC,MAAA,CAAAC,QAAA,CAAAC,IAAA;MACA,IAAAC,WAAA,GAAAJ,GAAA,CAAAK,KAAA;MACA,IAAAC,KAAA,GAAAC,kBAAA,CAAAH,WAAA,CAAAC,KAAA;MACA,IAAAG,QAAA,GAAAJ,WAAA,CAAAC,KAAA;MACAI,OAAA,CAAAC,GAAA,YAAAJ,KAAA,gBAAAE,QAAA;IACA;MACAC,OAAA,CAAAC,GAAA;IACA;EACA;EACAC,OAAA;IACAZ,eAAA;MACA,MAAAa,OAAA,GAAAlB,KAAA,CAAAmB,MAAA;MAEAD,OAAA,CACAE,GAAA,sCACAC,IAAA,CAAAC,QAAA;QACA,KAAAC,SAAA,GAAAD,QAAA,CAAAE,IAAA,CAAAC,EAAA;QACAV,OAAA,CAAAC,GAAA,oBAAAO,SAAA;MACA,GACAG,KAAA,CAAAC,KAAA;QACAZ,OAAA,CAAAY,KAAA,CAAAA,KAAA;MACA;IACA;IACAC,MAAA;MACA3B,WAAA,CACA4B,IAAA;QACAjB,KAAA,OAAAkB,IAAA,CAAAlB,KAAA;QACAE,QAAA,OAAAgB,IAAA,CAAAhB,QAAA;QACAiB,QAAA,OAAAD,IAAA,CAAAC,QAAA;QACAR,SAAA,OAAAA;MACA,GACAF,IAAA,CAAAC,QAAA;QACA,IAAAA,QAAA,CAAAE,IAAA,CAAAQ,IAAA,CAAAC,MAAA;UACAC,cAAA,CAAAC,OAAA,WAAAb,QAAA,CAAAE,IAAA,CAAAQ,IAAA,CAAAI,EAAA;UACAF,cAAA,CAAAC,OAAA,UAAAb,QAAA,CAAAE,IAAA,CAAAa,KAAA;UACAH,cAAA,CAAAC,OAAA,aAAAb,QAAA,CAAAE,IAAA,CAAAQ,IAAA,CAAAM,QAAA;UACAJ,cAAA,CAAAC,OAAA,YAAAb,QAAA,CAAAE,IAAA,CAAAe,OAAA,IAAAC,SAAA;UACAN,cAAA,CAAAC,OAAA,UAAAb,QAAA,CAAAE,IAAA,CAAAQ,IAAA,CAAApB,KAAA;UACA,IAAAU,QAAA,CAAAE,IAAA,CAAAQ,IAAA,CAAAM,QAAA;YACA,KAAAG,OAAA,CAAAC,IAAA;cAAAvC,IAAA;YAAA;UACA,WACAmB,QAAA,CAAAE,IAAA,CAAAQ,IAAA,CAAAM,QAAA,eACAhB,QAAA,CAAAE,IAAA,CAAAQ,IAAA,CAAAM,QAAA,gBACA;YACA,KAAAG,OAAA,CAAAC,IAAA;cAAAvC,IAAA;YAAA;UACA,WAAAmB,QAAA,CAAAE,IAAA,CAAAQ,IAAA,CAAAM,QAAA;YACA,KAAAG,OAAA,CAAAC,IAAA;cAAAvC,IAAA;YAAA;UACA;QACA;UACA,KAAAwC,QAAA,GACA;QACA;MACA,GACAjB,KAAA,CAAAkB,GAAA;QACA,KAAAD,QAAA,GAAAC,GAAA,CAAAtB,QAAA,CAAAE,IAAA,CAAAqB,OAAA;QACA9B,OAAA,CAAAY,KAAA,CAAAiB,GAAA,CAAAtB,QAAA,CAAAE,IAAA,CAAAqB,OAAA;MACA;IACA;EACA;EACArB,KAAA;IACA;MACAM,IAAA;QACAlB,KAAA;QACAE,QAAA;QACAiB,QAAA;MACA;MACAY,QAAA;MACApB,SAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}