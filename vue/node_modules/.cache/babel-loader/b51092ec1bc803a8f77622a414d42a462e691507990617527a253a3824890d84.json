{"ast":null,"code":"import _Message2 from \"element-ui/lib/theme-chalk/message.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Message from \"element-ui/lib/message\";\nimport _Popconfirm2 from \"element-ui/lib/theme-chalk/popconfirm.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Popconfirm from \"element-ui/lib/popconfirm\";\nimport _Tooltip2 from \"element-ui/lib/theme-chalk/tooltip.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Tooltip from \"element-ui/lib/tooltip\";\nimport \"core-js/modules/es.string.pad-start.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport Vue from \"vue\";\nimport axiosClient from \"../../../../axios\";\nimport PromoAssignBranchByAgentModal from \"./PromoAssignBranchByAgentModal.vue\";\nVue.use(_Tooltip);\nVue.use(_Popconfirm);\nexport default {\n  components: {\n    PromoAssignBranchByAgentModal: PromoAssignBranchByAgentModal\n  },\n  watch: {},\n  props: [\"promoData\", \"promoDetails\", \"dateBranchEnd\"],\n  computed: {},\n  data: function data() {\n    return {\n      tempBranchEditID: null,\n      editStartDate: \"\",\n      editEndDate: \"\"\n    };\n  },\n  mounted: function mounted() {},\n  methods: {\n    editTempBranch: function editTempBranch(id, dateStart, dateEnd, permanent) {\n      this.tempBranchEditID = id;\n      if (!permanent) {\n        this.editStartDate = this.convertDateFormat(dateStart);\n        this.editEndDate = this.convertDateFormat(dateEnd);\n      }\n    },\n    convertDateFormat: function convertDateFormat(date) {\n      var inputDate = new Date(date);\n      var year = inputDate.getFullYear();\n      var month = (inputDate.getMonth() + 1).toString().padStart(2, \"0\");\n      var day = inputDate.getDate().toString().padStart(2, \"0\");\n      return year + \"-\" + month + \"-\" + day;\n    },\n    handleRemove: function handleRemove(id) {\n      var _this = this;\n      axiosClient.post(\"/removeTempBranch\", {\n        id: id\n      }).then(function (response) {\n        _this.$emit(\"fetchPromoDetails\", _this.promoData.id);\n        _this.$emit(\"fetchData\");\n      }).catch(function (error) {\n        console.error(error);\n      });\n      _Message({\n        type: \"success\",\n        message: \"Temporary Branch has been removed.\"\n      });\n    },\n    handleSavePermBranch: function handleSavePermBranch() {},\n    handleSaveTempBranch: function handleSaveTempBranch(id, startDate, endDate) {\n      var _this2 = this;\n      if (this.convertDateFormat(this.editStartDate) != this.convertDateFormat(startDate) || this.convertDateFormat(this.editEndDate) != this.convertDateFormat(endDate)) {\n        axiosClient.post(\"/updateTempBranch\", {\n          id: id,\n          startDate: this.convertDateFormat(this.editStartDate),\n          endDate: this.convertDateFormat(this.editEndDate)\n        }).then(function (response) {\n          _this2.$emit(\"fetchPromoDetails\", _this2.promoData.id);\n        }).catch(function (error) {\n          console.error(error);\n        });\n        _Message({\n          type: \"success\",\n          message: \"Temporary Branch has been updated.\"\n        });\n      }\n      this.tempBranchEditID = null;\n    }\n  }\n};","map":{"version":3,"names":["Vue","axiosClient","PromoAssignBranchByAgentModal","use","_Tooltip","_Popconfirm","components","watch","props","computed","data","tempBranchEditID","editStartDate","editEndDate","mounted","methods","editTempBranch","id","dateStart","dateEnd","permanent","convertDateFormat","date","inputDate","Date","year","getFullYear","month","getMonth","toString","padStart","day","getDate","handleRemove","_this","post","then","response","$emit","promoData","catch","error","console","_Message","type","message","handleSavePermBranch","handleSaveTempBranch","startDate","endDate","_this2"],"sources":["src/components/Dashboard/Views/PullOut/PromoDetailsModal.vue"],"sourcesContent":["<template>\n  <div>\n    <div\n      class=\"modal fade\"\n      id=\"promoDetailsModal\"\n      tabindex=\"-1\"\n      aria-labelledby=\"promoDetailsModalLabel\"\n      aria-hidden=\"true\"\n    >\n      <div class=\"modal-dialog modal-dialog-centered modal-xl\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header py-3\">\n            <span style=\"font-size: 16px\"\n              >Promo Name:\n              <b style=\"font-size: 16px; text-transform: uppercase\">{{\n                promoData.name\n              }}</b></span\n            ><br />\n            <span\n              >Email: <b>{{ promoData.email }}</b></span\n            >\n          </div>\n          <div class=\"modal-body row pt-2 pb-3 px-4\">\n            <span class=\"text-center mb-2\" style=\"font-size: 13px\">\n              <b>{{ promoDetails.length }} Assigned Branch:</b>\n            </span>\n            <div\n              style=\"\n                overflow-x: auto;\n                min-width: 350px;\n                overflow-y: auto;\n                min-height: 150px;\n              \"\n            >\n              <table class=\"table table-borderless\">\n                <thead>\n                  <tr>\n                    <th scope=\"col\" class=\"labelRows\">Company</th>\n                    <th scope=\"col\" class=\"labelRows\">Chain Name</th>\n                    <th scope=\"col\" class=\"labelRows\">Branch Name</th>\n                    <th scope=\"col\" class=\"labelRows\">Start Date</th>\n                    <th scope=\"col\" class=\"labelRows\">Expiry Date</th>\n                    <th scope=\"col\" class=\"labelRows\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr v-for=\"details in promoDetails\">\n                    <td v-if=\"tempBranchEditID == details.id && details.permanent\">\n                      <el-select\n                        class=\"select-default\"\n                        size=\"small\"\n                        placeholder=\"Select Company\"\n                      >\n                        <el-option>EPC</el-option>\n                        <el-option>AHLC</el-option>\n                      </el-select>\n                    </td>\n                    <td\n                      :class=\"\n                        details.expired\n                          ? details.expired == 'expired'\n                            ? 'cell text-nowrap py-1 expiredCSS'\n                            : 'cell text-nowrap py-1 removedCSS'\n                          : 'cell text-nowrap py-1'\n                      \"\n                    >\n                      {{ details.company }}\n                    </td>\n                    <td\n                      :class=\"\n                        details.expired\n                          ? details.expired == 'expired'\n                            ? 'cell text-nowrap py-1 expiredCSS'\n                            : 'cell text-nowrap py-1 removedCSS'\n                          : 'cell text-nowrap py-1'\n                      \"\n                    >\n                      {{ details.chainCode }}\n                    </td>\n                    <td\n                      :class=\"\n                        details.expired\n                          ? details.expired == 'expired'\n                            ? 'cell text-nowrap py-1 expiredCSS'\n                            : 'cell text-nowrap py-1 removedCSS'\n                          : 'cell text-nowrap py-1'\n                      \"\n                    >\n                      <el-tooltip\n                        v-if=\"details.permanent\"\n                        effect=\"light\"\n                        content=\"Permanent Branch\"\n                        placement=\"top-start\"\n                      >\n                        <span class=\"p-icon\">P</span></el-tooltip\n                      >\n                      <el-tooltip\n                        v-else-if=\"!details.permanent\"\n                        effect=\"light\"\n                        content=\"Temporary Branch\"\n                        placement=\"top-start\"\n                      >\n                        <span class=\"t-icon\">T</span>\n                      </el-tooltip>\n                      &nbsp;{{ details.branchName }}\n                    </td>\n                    <!-- if(details.id == current_id && edit_mode) -->\n                    <td\n                      v-if=\"tempBranchEditID == details.id && !details.permanent\"\n                      style=\"width: 150px\"\n                    >\n                      <el-date-picker\n                        id=\"datePromo\"\n                        v-model=\"editStartDate\"\n                        style=\"width: 90%\"\n                        type=\"date\"\n                        placeholder=\"Pick a date\"\n                        :clearable=\"false\"\n                      >\n                      </el-date-picker>\n                    </td>\n                    <td\n                      v-else\n                      :class=\"\n                        details.expired\n                          ? details.expired == 'expired'\n                            ? 'cell text-nowrap py-1 expiredCSS'\n                            : 'cell text-nowrap py-1 removedCSS'\n                          : 'cell text-nowrap py-1'\n                      \"\n                    >\n                      {{ details.dateStart }}\n                    </td>\n                    <td\n                      v-if=\"tempBranchEditID == details.id && !details.permanent\"\n                      style=\"width: 150px\"\n                    >\n                      <el-date-picker\n                        v-model=\"editEndDate\"\n                        style=\"width: 90%\"\n                        type=\"date\"\n                        placeholder=\"Pick a date\"\n                        :clearable=\"false\"\n                      >\n                      </el-date-picker>\n                    </td>\n                    <td\n                      v-else\n                      :class=\"\n                        details.expired\n                          ? details.expired == 'expired'\n                            ? 'cell text-nowrap py-1 expiredCSS'\n                            : 'cell text-nowrap py-1 removedCSS'\n                          : 'cell text-nowrap py-1'\n                      \"\n                    >\n                      {{ details.dateEnd }}\n                    </td>\n                    <td\n                      v-if=\"!details.expired && tempBranchEditID != details.id\"\n                      class=\"cell text-nowrap py-1\"\n                    >\n                      <p-button\n                        type=\"success\"\n                        size=\"sm\"\n                        icon\n                        @click=\"\n                          editTempBranch(\n                            details.id,\n                            details.dateStart,\n                            details.dateEnd,\n                            details.permanent\n                          )\n                        \"\n                        :disabled=\"tempBranchEditID != null\"\n                      >\n                        <i class=\"fa fa-edit\"></i>\n                      </p-button>\n                      <el-popconfirm\n                        v-if=\"!details.permanent\"\n                        width=\"280\"\n                        confirm-button-text=\"Confirm\"\n                        cancel-button-text=\"Cancel\"\n                        icon-color=\"#c45656\"\n                        title=\"Are you sure you want to remove this temporary branch?\"\n                        @confirm=\"handleRemove(details.id)\"\n                      >\n                        <p-button\n                          class=\"ml-1\"\n                          slot=\"reference\"\n                          type=\"danger\"\n                          size=\"sm\"\n                          icon\n                          :disabled=\"tempBranchEditID != null\"\n                        >\n                          <i class=\"fa fa-trash\"></i>\n                        </p-button>\n                      </el-popconfirm>\n                    </td>\n                    <td\n                      v-if=\"!details.expired && tempBranchEditID == details.id\"\n                      class=\"cell text-nowrap py-1\"\n                    >\n                      <el-tooltip content=\"Save Changes\" placement=\"bottom\">\n                        <el-popconfirm\n                          width=\"280\"\n                          confirm-button-text=\"Confirm\"\n                          cancel-button-text=\"Cancel\"\n                          icon-color=\"#fbc658\"\n                          title=\"Are you sure you want to save changes for this temporary branch?\"\n                          @confirm=\"\n                            details.permanent\n                              ? handleSavePermBranch(details.id)\n                              : handleSaveTempBranch(\n                                  details.id,\n                                  details.dateStart,\n                                  details.dateEnd\n                                )\n                          \"\n                        >\n                          <p-button slot=\"reference\" type=\"warning\" size=\"sm\" icon>\n                            <i class=\"fa fa-check\"></i>\n                          </p-button>\n                        </el-popconfirm>\n                      </el-tooltip>\n                      <el-tooltip content=\"Discard Changes\" placement=\"bottom\">\n                        <p-button\n                          type=\"default\"\n                          size=\"sm\"\n                          class=\"ml-1\"\n                          icon\n                          @click=\"tempBranchEditID = null\"\n                        >\n                          <i class=\"fa fa-remove\"></i>\n                        </p-button>\n                      </el-tooltip>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            <!-- <div class=\"d-flex mt-2 text-center\">\n            <span class=\"labelRows col-12\">Date Branch Expiration</span>\n          </div>\n          <div class=\"d-flex mt-1 text-center\">\n            <span class=\"col-12\">{{ dateBranchEnd }}</span>\n          </div> -->\n\n            <!-- <span class=\"text-center mb-3\" style=\"font-size: 13px\">\n            <b>{{ promoDetails.length }} Assigned Branch:</b>\n          </span>\n          <div class=\"d-flex\">\n            <span class=\"labelRows col-3 text-nowrap\">Company</span>\n            <span class=\"labelRows col-3\">Chain Name</span>\n            <span class=\"labelRows col-6\">Branch Name</span>\n          </div>\n          <div class=\"d-flex mt-1\" v-for=\"details in promoDetails\">\n            <span class=\"col-3\">{{ details.company }}</span>\n            <span class=\"col-3\">{{ details.chainCode }}</span>\n            <span class=\"col-6\">{{ details.branchName }}</span>\n          </div>\n          <div class=\"d-flex mt-3 text-center\">\n            <span class=\"labelRows col-12\">Date Branch Expiration</span>\n          </div>\n          <div class=\"d-flex mt-1 text-center\">\n            <span class=\"col-12\">{{ dateBranchEnd }}</span>\n          </div> -->\n          </div>\n          <div class=\"modal-footer d-flex justify-content-center\">\n            <button\n              class=\"btn btn-secondary\"\n              data-bs-dismiss=\"modal\"\n              @click=\"tempBranchEditID = null\"\n            >\n              Close\n            </button>\n            <button\n              class=\"btn btn-success\"\n              data-bs-toggle=\"modal\"\n              data-bs-target=\"#promoAssignBranchByAgentModal\"\n            >\n              Add Temporary Branch\n            </button>\n            <!-- <button class=\"btn btn-primary\" data-bs-dismiss=\"modal\" @click=\"deactivate()\">\n            Proceed\n          </button> -->\n          </div>\n        </div>\n      </div>\n    </div>\n    <PromoAssignBranchByAgentModal\n      :promoData=\"promoData\"\n      :promoDetails=\"promoDetails\"\n    ></PromoAssignBranchByAgentModal>\n  </div>\n</template>\n<script>\nimport Vue from \"vue\";\nimport axiosClient from \"../../../../axios\";\nimport { Tooltip, Popconfirm, Message } from \"element-ui\";\nimport PromoAssignBranchByAgentModal from \"./PromoAssignBranchByAgentModal.vue\";\n\nVue.use(Tooltip);\nVue.use(Popconfirm);\n\nexport default {\n  components: { PromoAssignBranchByAgentModal },\n  watch: {},\n  props: [\"promoData\", \"promoDetails\", \"dateBranchEnd\"],\n  computed: {\n    /***\n     * Searches through table data and returns a paginated array.\n     * Note that this should not be used for table with a lot of data as it might be slow!\n     * Do the search and the pagination on the server and display the data retrieved from server instead.\n     * @returns {computed.pagedData}\n     */\n  },\n  data() {\n    return {\n      tempBranchEditID: null,\n      editStartDate: \"\",\n      editEndDate: \"\",\n    };\n  },\n  mounted() {},\n  methods: {\n    editTempBranch(id, dateStart, dateEnd, permanent) {\n      this.tempBranchEditID = id;\n      if (!permanent) {\n        this.editStartDate = this.convertDateFormat(dateStart);\n        this.editEndDate = this.convertDateFormat(dateEnd);\n      }\n    },\n    convertDateFormat(date) {\n      var inputDate = new Date(date);\n      var year = inputDate.getFullYear();\n      var month = (inputDate.getMonth() + 1).toString().padStart(2, \"0\"); // Months are zero-based\n      var day = inputDate.getDate().toString().padStart(2, \"0\");\n\n      return year + \"-\" + month + \"-\" + day;\n    },\n    handleRemove(id) {\n      axiosClient\n        .post(\"/removeTempBranch\", {\n          id: id,\n        })\n        .then((response) => {\n          this.$emit(\"fetchPromoDetails\", this.promoData.id);\n          this.$emit(\"fetchData\");\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n\n      Message({\n        type: \"success\",\n        message: \"Temporary Branch has been removed.\",\n      });\n    },\n    handleSavePermBranch() {},\n    handleSaveTempBranch(id, startDate, endDate) {\n      if (\n        this.convertDateFormat(this.editStartDate) != this.convertDateFormat(startDate) ||\n        this.convertDateFormat(this.editEndDate) != this.convertDateFormat(endDate)\n      ) {\n        axiosClient\n          .post(\"/updateTempBranch\", {\n            id: id,\n            startDate: this.convertDateFormat(this.editStartDate),\n            endDate: this.convertDateFormat(this.editEndDate),\n          })\n          .then((response) => {\n            this.$emit(\"fetchPromoDetails\", this.promoData.id);\n          })\n          .catch((error) => {\n            console.error(error);\n          });\n\n        Message({\n          type: \"success\",\n          message: \"Temporary Branch has been updated.\",\n        });\n      }\n      this.tempBranchEditID = null;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.tr_num {\n  font-size: 35px;\n  font-weight: 700;\n}\n.labelRows {\n  font-size: 0.8571em !important;\n  color: #9a9a9a !important;\n  // margin-bottom: 5px;\n  white-space: nowrap !important;\n  padding: 7px !important;\n}\n.p-icon {\n  background-color: #6bd098;\n  padding: 0px 3px;\n  border-radius: 3px;\n  color: white;\n  font-size: 12px;\n  font-weight: 700;\n}\n.t-icon {\n  background-color: #31d2f2;\n  padding: 0px 4px;\n  border-radius: 3px;\n  color: white;\n  font-size: 12px;\n  font-weight: 700;\n}\n\n#datePromo .el-input__inner {\n  padding-top: 0px !important;\n  padding-bottom: 0px !important;\n  padding-left: 30px !important;\n  padding-right: 15p !important;\n}\n\n.expiredCSS {\n  text-decoration: line-through;\n  text-decoration-color: red;\n}\n.expiredCSS::before {\n  content: \"This temporary branch has expired.\";\n  position: absolute;\n  top: 0px; /* Adjust this value to position the tooltip as desired */\n  left: 50%;\n  transform: translateX(-50%);\n  background: red;\n  color: white;\n  padding: 5px;\n  border-radius: 5px;\n  opacity: 0;\n  transition: opacity 0.2s;\n  z-index: 1;\n}\n\n.expiredCSS:hover::before {\n  opacity: 1;\n}\n\n.removedCSS {\n  text-decoration: line-through;\n  text-decoration-color: red;\n}\n.removedCSS::before {\n  content: \"This temporary branch has been removed.\";\n  position: absolute;\n  top: 0px; /* Adjust this value to position the tooltip as desired */\n  left: 50%;\n  transform: translateX(-50%);\n  background: red;\n  color: white;\n  padding: 5px;\n  border-radius: 5px;\n  opacity: 0;\n  transition: opacity 0.2s;\n  z-index: 1;\n}\n\n.removedCSS:hover::before {\n  opacity: 1;\n}\n</style>\n"],"mappings":";;;;;;;;;;;;AAySA,OAAAA,GAAA;AACA,OAAAC,WAAA;AAEA,OAAAC,6BAAA;AAEAF,GAAA,CAAAG,GAAA,CAAAC,QAAA;AACAJ,GAAA,CAAAG,GAAA,CAAAE,WAAA;AAEA;EACAC,UAAA;IAAAJ,6BAAA,EAAAA;EAAA;EACAK,KAAA;EACAC,KAAA;EACAC,QAAA,GAOA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,gBAAA;MACAC,aAAA;MACAC,WAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;EACAC,OAAA;IACAC,cAAA,WAAAA,eAAAC,EAAA,EAAAC,SAAA,EAAAC,OAAA,EAAAC,SAAA;MACA,KAAAT,gBAAA,GAAAM,EAAA;MACA,KAAAG,SAAA;QACA,KAAAR,aAAA,QAAAS,iBAAA,CAAAH,SAAA;QACA,KAAAL,WAAA,QAAAQ,iBAAA,CAAAF,OAAA;MACA;IACA;IACAE,iBAAA,WAAAA,kBAAAC,IAAA;MACA,IAAAC,SAAA,OAAAC,IAAA,CAAAF,IAAA;MACA,IAAAG,IAAA,GAAAF,SAAA,CAAAG,WAAA;MACA,IAAAC,KAAA,IAAAJ,SAAA,CAAAK,QAAA,QAAAC,QAAA,GAAAC,QAAA;MACA,IAAAC,GAAA,GAAAR,SAAA,CAAAS,OAAA,GAAAH,QAAA,GAAAC,QAAA;MAEA,OAAAL,IAAA,SAAAE,KAAA,SAAAI,GAAA;IACA;IACAE,YAAA,WAAAA,aAAAhB,EAAA;MAAA,IAAAiB,KAAA;MACAjC,WAAA,CACAkC,IAAA;QACAlB,EAAA,EAAAA;MACA,GACAmB,IAAA,WAAAC,QAAA;QACAH,KAAA,CAAAI,KAAA,sBAAAJ,KAAA,CAAAK,SAAA,CAAAtB,EAAA;QACAiB,KAAA,CAAAI,KAAA;MACA,GACAE,KAAA,WAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,CAAAA,KAAA;MACA;MAEAE,QAAA;QACAC,IAAA;QACAC,OAAA;MACA;IACA;IACAC,oBAAA,WAAAA,qBAAA;IACAC,oBAAA,WAAAA,qBAAA9B,EAAA,EAAA+B,SAAA,EAAAC,OAAA;MAAA,IAAAC,MAAA;MACA,IACA,KAAA7B,iBAAA,MAAAT,aAAA,UAAAS,iBAAA,CAAA2B,SAAA,KACA,KAAA3B,iBAAA,MAAAR,WAAA,UAAAQ,iBAAA,CAAA4B,OAAA,GACA;QACAhD,WAAA,CACAkC,IAAA;UACAlB,EAAA,EAAAA,EAAA;UACA+B,SAAA,OAAA3B,iBAAA,MAAAT,aAAA;UACAqC,OAAA,OAAA5B,iBAAA,MAAAR,WAAA;QACA,GACAuB,IAAA,WAAAC,QAAA;UACAa,MAAA,CAAAZ,KAAA,sBAAAY,MAAA,CAAAX,SAAA,CAAAtB,EAAA;QACA,GACAuB,KAAA,WAAAC,KAAA;UACAC,OAAA,CAAAD,KAAA,CAAAA,KAAA;QACA;QAEAE,QAAA;UACAC,IAAA;UACAC,OAAA;QACA;MACA;MACA,KAAAlC,gBAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}