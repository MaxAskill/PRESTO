{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport { CollapseTransition } from \"vue2-transitions\";\nimport axiosClient from \"../../../axios\";\nimport PromoProfile from \"./PromoProfile.vue\";\nexport default {\n  components: {\n    CollapseTransition: CollapseTransition,\n    PromoProfile: PromoProfile\n  },\n  data: function data() {\n    return {\n      isClosed: true,\n      name: \"\",\n      time: null,\n      interval: null\n    };\n  },\n  beforeDestroy: function beforeDestroy() {\n    clearInterval(this.interval);\n  },\n  created: function created() {},\n  mounted: function mounted() {\n    this.fetchData();\n    this.dateTime();\n  },\n  methods: {\n    dateTime: function dateTime() {\n      var _this = this;\n      this.interval = setInterval(function () {\n        _this.time = Intl.DateTimeFormat(navigator.language, {\n          hour: \"numeric\",\n          minute: \"numeric\",\n          second: \"numeric\"\n        }).format();\n      }, 1000);\n      console.log(\"Time:\", this.time);\n    },\n    fetchData: function fetchData() {\n      var _this2 = this;\n      axiosClient.get(\"/users\", {\n        params: {\n          email: sessionStorage.getItem(\"Email\")\n        }\n      }).then(function (response) {\n        console.log(\"Success User Response:\", response.data);\n        _this2.name = response.data[0].name;\n      }).catch(function (error) {\n        console.error(error);\n      });\n    },\n    toggleMenu: function toggleMenu() {\n      this.isClosed = !this.isClosed;\n    },\n    logout: function logout() {\n      var _this3 = this;\n      axiosClient.post(\"/logout\").then(function (response) {\n        sessionStorage.removeItem(\"UserID\");\n        sessionStorage.removeItem(\"Token\");\n        sessionStorage.removeItem(\"Position\");\n        sessionStorage.removeItem(\"Company\");\n        sessionStorage.removeItem(\"Email\");\n        _this3.$router.push({\n          name: \"Login\"\n        });\n      });\n    }\n  }\n};","map":{"version":3,"names":["CollapseTransition","axiosClient","PromoProfile","components","data","isClosed","name","time","interval","beforeDestroy","clearInterval","created","mounted","fetchData","dateTime","methods","_this","setInterval","Intl","DateTimeFormat","navigator","language","hour","minute","second","format","console","log","_this2","get","params","email","sessionStorage","getItem","then","response","catch","error","toggleMenu","logout","_this3","post","removeItem","$router","push"],"sources":["src/components/UIComponents/SidebarPlugin/UserMenu.vue"],"sourcesContent":["<template>\n  <div class=\"user\">\n    <div class=\"photo\">\n      <img src=\"static/img/faces/user-icon.png\" alt=\"user avatar\" />\n      import router from \"../../../routes/routes\";\n    </div>\n    <a class=\"simple-text logo-normal user-select-none\">\n      {{ time }}\n    </a>\n    <div class=\"info\">\n      <a data-toggle=\"collapse\" :aria-expanded=\"!isClosed\" @click=\"toggleMenu\" href=\"#\">\n        <!-- <span>\n          {{ name }}\n          <b class=\"caret\"></b>\n        </span> -->\n      </a>\n      <div class=\"clearfix\"></div>\n      <div>\n        <collapse-transition>\n          <ul class=\"nav nav-menu\" v-show=\"!isClosed\">\n            <li>\n              <a href=\"#\">\n                <span class=\"sidebar-mini-icon\">Mp</span>\n                <span class=\"sidebar-normal\">My Profile</span>\n              </a>\n            </li>\n            <li>\n              <a href=\"#\" data-bs-target=\"#promoProfile\" data-bs-toggle=\"modal\">\n                <span class=\"sidebar-mini-icon\">Ep</span>\n                <span class=\"sidebar-normal\">Edit Profile</span>\n              </a>\n            </li>\n            <li>\n              <a href=\"#\" @click=\"logout\">\n                <span class=\"sidebar-mini-icon\">L</span>\n                <span class=\"sidebar-normal\">Logout</span>\n              </a>\n            </li>\n          </ul>\n        </collapse-transition>\n      </div>\n    </div>\n    <PromoProfile></PromoProfile>\n  </div>\n</template>\n<script>\nimport { CollapseTransition } from \"vue2-transitions\";\nimport axiosClient from \"../../../axios\";\nimport PromoProfile from \"./PromoProfile.vue\";\n\nexport default {\n  components: {\n    CollapseTransition,\n    PromoProfile,\n  },\n  data() {\n    return {\n      isClosed: true,\n      name: \"\",\n      time: null,\n      interval: null,\n    };\n  },\n  beforeDestroy() {\n    // prevent memory leak\n    clearInterval(this.interval);\n  },\n  created() {},\n  mounted() {\n    this.fetchData();\n    this.dateTime();\n  },\n  methods: {\n    dateTime() {\n      // update the time every second\n      this.interval = setInterval(() => {\n        // Concise way to format time according to system locale.\n        // In my case this returns \"3:48:00 am\"\n        this.time = Intl.DateTimeFormat(navigator.language, {\n          hour: \"numeric\",\n          minute: \"numeric\",\n          second: \"numeric\",\n        }).format();\n      }, 1000);\n\n      console.log(\"Time:\", this.time);\n    },\n\n    fetchData() {\n      axiosClient\n        .get(\"/users\", {\n          params: {\n            email: sessionStorage.getItem(\"Email\"),\n          },\n        })\n        .then((response) => {\n          console.log(\"Success User Response:\", response.data);\n          this.name = response.data[0].name;\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    },\n    toggleMenu() {\n      this.isClosed = !this.isClosed;\n    },\n    logout() {\n      axiosClient.post(\"/logout\").then((response) => {\n        // console.log(response);\n        sessionStorage.removeItem(\"UserID\");\n        sessionStorage.removeItem(\"Token\");\n        sessionStorage.removeItem(\"Position\");\n        sessionStorage.removeItem(\"Company\");\n        sessionStorage.removeItem(\"Email\");\n        this.$router.push({ name: \"Login\" });\n      });\n    },\n  },\n};\n</script>\n<style scoped>\n.nav.nav-menu {\n  margin-top: 0;\n}\n</style>\n"],"mappings":";AA8CA,SAAAA,kBAAA;AACA,OAAAC,WAAA;AACA,OAAAC,YAAA;AAEA;EACAC,UAAA;IACAH,kBAAA,EAAAA,kBAAA;IACAE,YAAA,EAAAA;EACA;EACAE,IAAA,WAAAA,KAAA;IACA;MACAC,QAAA;MACAC,IAAA;MACAC,IAAA;MACAC,QAAA;IACA;EACA;EACAC,aAAA,WAAAA,cAAA;IAEAC,aAAA,MAAAF,QAAA;EACA;EACAG,OAAA,WAAAA,QAAA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,SAAA;IACA,KAAAC,QAAA;EACA;EACAC,OAAA;IACAD,QAAA,WAAAA,SAAA;MAAA,IAAAE,KAAA;MAEA,KAAAR,QAAA,GAAAS,WAAA;QAGAD,KAAA,CAAAT,IAAA,GAAAW,IAAA,CAAAC,cAAA,CAAAC,SAAA,CAAAC,QAAA;UACAC,IAAA;UACAC,MAAA;UACAC,MAAA;QACA,GAAAC,MAAA;MACA;MAEAC,OAAA,CAAAC,GAAA,eAAApB,IAAA;IACA;IAEAM,SAAA,WAAAA,UAAA;MAAA,IAAAe,MAAA;MACA3B,WAAA,CACA4B,GAAA;QACAC,MAAA;UACAC,KAAA,EAAAC,cAAA,CAAAC,OAAA;QACA;MACA,GACAC,IAAA,WAAAC,QAAA;QACAT,OAAA,CAAAC,GAAA,2BAAAQ,QAAA,CAAA/B,IAAA;QACAwB,MAAA,CAAAtB,IAAA,GAAA6B,QAAA,CAAA/B,IAAA,IAAAE,IAAA;MACA,GACA8B,KAAA,WAAAC,KAAA;QACAX,OAAA,CAAAW,KAAA,CAAAA,KAAA;MACA;IACA;IACAC,UAAA,WAAAA,WAAA;MACA,KAAAjC,QAAA,SAAAA,QAAA;IACA;IACAkC,MAAA,WAAAA,OAAA;MAAA,IAAAC,MAAA;MACAvC,WAAA,CAAAwC,IAAA,YAAAP,IAAA,WAAAC,QAAA;QAEAH,cAAA,CAAAU,UAAA;QACAV,cAAA,CAAAU,UAAA;QACAV,cAAA,CAAAU,UAAA;QACAV,cAAA,CAAAU,UAAA;QACAV,cAAA,CAAAU,UAAA;QACAF,MAAA,CAAAG,OAAA,CAAAC,IAAA;UAAAtC,IAAA;QAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}